var cropper,currentInputId,croppedImages={},cropperModal=new bootstrap.Modal(document.getElementById("cropperModal"));document.addEventListener("DOMContentLoaded",(function(){cropperModal._element.addEventListener("shown.bs.modal",(function(){cropper&&cropper.resize()})),cropperModal._element.addEventListener("hidden.bs.modal",(function(){cropper&&(cropper.destroy(),cropper=null)})),document.getElementById("cropButton").addEventListener("click",(function(){if(cropper&&currentInputId){var canvas=cropper.getCroppedCanvas({width:"preview"===currentInputId?1080:256,height:"preview"===currentInputId?720:256});croppedImages[currentInputId]=canvas.toDataURL("image/webp"),cropperModal.hide(),uploadSingle(currentInputId)}})),window.openCropModal=function(event,inputId){var file=event.target.files[0],reader=new FileReader;reader.onload=function(e){var img=document.getElementById("cropperImage");img.src=e.target.result,currentInputId=inputId,cropperModal.show();var aspectRatio=1;"preview"===inputId&&(aspectRatio=1.5,1080),cropper&&cropper.destroy(),cropper=new Cropper(img,{aspectRatio:aspectRatio,viewMode:3,dragMode:"crop",cropBoxResizable:!0,cropBoxMovable:!0,zoomable:!1,scalable:!1})},reader.readAsDataURL(file)}}));