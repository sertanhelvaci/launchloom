var imagekit=new ImageKit({publicKey:"public_RlHiFa9SqYHuddoOjFik0FyCAg8=",urlEndpoint:"https://ik.imagekit.io/6camnbsww"});const logoUrl=localStorage.getItem("logoUrl"),previewUrl=localStorage.getItem("previewUrl");function uploadSingle(id){var image=croppedImages[id];if(image){var blob=dataURLtoBlob(image);toggleIconState(id,"loading"),google.script.run.withSuccessHandler((auth=>{uploadImage(auth,blob,id+".png",((err,result)=>{if(err)console.error(`${id} yükleme hatası:`,err),toggleIconState(id,"add");else{console.log(`${id} başarıyla yüklendi:`,result),toggleIconState(id,"done");document.getElementById(id+"Link").src=result.url,localStorage.setItem(id+"Url",result.url),console.log("Logo URL:",logoUrl),console.log("Preview URL:",previewUrl)}}))})).generateSignature()}}function uploadImage(auth,blob,fileName,callback){imagekit.upload({file:blob,fileName:fileName,token:auth.token,signature:auth.signature,expire:auth.expire},(function(err,result){callback(err,result)}))}function dataURLtoBlob(dataurl){for(var arr=dataurl.split(","),mime=arr[0].match(/:(.*?);/)[1],bstr=atob(arr[1]),n=bstr.length,u8arr=new Uint8Array(n);n--;)u8arr[n]=bstr.charCodeAt(n);return new Blob([u8arr],{type:mime})}function toggleIconState(idPrefix,state){const addIcon=document.querySelector(`.${idPrefix} .add`),loadingIcon=document.querySelector(`.${idPrefix} .loading`),doneIcon=document.querySelector(`.${idPrefix} .done`);addIcon.style.display="add"===state?"block":"none",loadingIcon.style.display="loading"===state?"block":"none",doneIcon.style.display="done"===state?"block":"none"}function updateFileName(inputId,displayId){const inputElement=document.getElementById(inputId),displayElement=document.getElementById(displayId);inputElement.addEventListener("change",(function(){const fileName=inputElement.files[0]?.name||"No file selected";displayElement.textContent=fileName}))}console.log("Logo URL:",logoUrl),console.log("Preview URL:",previewUrl),updateFileName("logo","logoName"),updateFileName("preview","previewName");